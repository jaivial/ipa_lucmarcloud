import{a as r}from"./axios.B4uVmeYG.js";import{T as u}from"./toastify.CHTvHrP4.js";import"./_commonjsHelpers.Cpj98o6Y.js";function l(){document.getElementById("loading-screen").classList.add("hidden")}l();function f(){let t={},a=document.cookie;if(a==="")return t;let e=a.split(";");for(let n of e){let[i,o]=n.split("=");i=i.trim(),o=o?o.trim():"",t[i]=decodeURIComponent(o)}return t}function d(t){return f()[t]||null}function h(){const t=d("hashID"),a=d("userID");!t||!a||r.get("https://estudiolucmar.com/backend/auth/checkCurrentSession.php",{withCredentials:!0}).then(function(e){console.log(e.data),e.data.success===!1||e.data.success===!0&&(window.location.href="/home")}).catch(function(e){console.log(e)})}h();document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("form-button"),a=document.getElementById("cerrarNotification");t.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e()}),a.addEventListener("click",function(n){n.stopPropagation();const i=document.getElementById("notification");i.classList.add("hidden"),i.classList.remove("flex")});function e(){const n=document.getElementById("email").value,i=document.getElementById("password").value;r.get("https://estudiolucmar.com/backend/auth/auth.php",{withCredentials:!0,params:{email:n,password:i}}).then(function(o){console.log(o.data),o.data.success===!0?r.get("https://estudiolucmar.com/backend/auth/checkActiveSession.php",{withCredentials:!0}).then(function(c){console.log(c.data),c.data.success===!1?r.get("https://estudiolucmar.com/backend/auth/login.php",{withCredentials:!0}).then(function(s){console.log(s.data),s.data.success===!0&&(u({text:"Sesión inciada.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right bottom, #00603c, #006f39, #007d31, #008b24, #069903)",textAlign:"center"},onClick:function(){}}).showToast(),window.location.href="/home")}).catch(function(s){console.log(s)}):u({text:"Sesión activa en otro dispositivo.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)",textAlign:"center"},onClick:function(){}}).showToast()}).catch(function(c){console.log(c)}):u({text:"Usuario o contraseña incorrectos.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)",textAlign:"center"},onClick:function(){}}).showToast()}).catch(function(o){console.log(o)})}});
