import{a as L}from"./axios.B4uVmeYG.js";import{T as M}from"./toastify.CHTvHrP4.js";import"./hoisted.0hWJMduo.js";import"./_commonjsHelpers.Cpj98o6Y.js";var _=!0,T=!0;N();function G(e){return e.charAt(0).toUpperCase()+e.slice(1)}function V(){const e=document.getElementById("clock-settings"),o={weekday:"long",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Europe/Madrid"},a=new Date().toLocaleString("es-ES",o),t=G(a);e.textContent=t}V();setInterval(V,1e3);function J(){console.log("Hiding loading screen...");const e=document.getElementById("loading-screen-two");e.classList.remove("flex"),e.classList.add("hidden")}function N(){const e=document.getElementById("img-profile-photo-informacion-usuario"),o=document.getElementById("img-profile-photo-informacion-usuario-edicion"),a=document.getElementById("nombre-informacion-usuario"),t=document.getElementById("email-informacion-usuario"),u=document.getElementById("password-informacion-usuario"),g=document.getElementById("admin-informacion-usuario"),r=document.getElementById("admin-informacion-usuario-edicion-admin"),y=document.getElementById("admin-informacion-usuario-edicion-comercial"),h=document.getElementById("nombre-informacion-usuario-edicion"),f=document.getElementById("apellido-informacion-usuario-edicion"),s=document.getElementById("email-informacion-usuario-edicion"),c=document.getElementById("password-informacion-usuario-edicion");document.getElementById("rol-informacion-usuario-edicion"),document.getElementById("rol-edicion"),document.getElementById("container-informacion-usuario-allusers");const m=document.getElementById("bloques-informacion-usuario-allusers"),p=document.getElementById("tablaallusers");p.innerHTML="",L.get("https://estudiolucmar.com/backend/users/fetchusersdatabase.php").then(n=>{n.data.forEach(i=>{const b=document.createElement("div");b.classList.add("flex","flex-row","justify-between","items-center","gap-2","w-full","h-auto","py-2","border-b","border-gray-400","mt-2","px-8"),p.appendChild(b);const I=document.createElement("p");I.classList.add("text-md","font-bold","text-slate-800"),I.innerText=i.name+" "+i.apellido,b.appendChild(I);const d=document.createElement("div");b.appendChild(d);const U=document.createElementNS("http://www.w3.org/2000/svg","svg");U.setAttribute("xmlns","http://www.w3.org/2000/svg"),U.setAttribute("width","1.75em"),U.setAttribute("height","1.75em"),U.setAttribute("viewBox","0 0 1024 1024");const H=document.createElementNS("http://www.w3.org/2000/svg","path");H.setAttribute("fill","currentColor"),H.setAttribute("d","M512 0C229.232 0 0 229.232 0 512c0 282.784 229.232 512 512 512c282.784 0 512-229.216 512-512C1024 229.232 794.784 0 512 0m0 961.008c-247.024 0-448-201.984-448-449.01c0-247.024 200.976-448 448-448s448 200.977 448 448s-200.976 449.01-448 449.01M736 480H544V288c0-17.664-14.336-32-32-32s-32 14.336-32 32v192H288c-17.664 0-32 14.336-32 32s14.336 32 32 32h192v192c0 17.664 14.336 32 32 32s32-14.336 32-32V544h192c17.664 0 32-14.336 32-32s-14.336-32-32-32"),U.appendChild(H),d.appendChild(U),d.classList.add("hover:cursor-pointer","hover:bg-zinc-800","rounded-full","hover:font-extrabold","hover:text-white"),d.id=i.id,d.addEventListener("click",function(){De(i.id)})}),Q()}),L.get("https://estudiolucmar.com/backend/users/fetchusers.php",{withCredentials:!0}).then(n=>{n.data.forEach(l=>{if(l.profile_photo)e.src="data:image/jpeg;base64,"+l.profile_photo,o.src="data:image/jpeg;base64,"+l.profile_photo;else if(l.profile_photo==null){const S=document.createElement("p");S.textContent="No hay foto",document.getElementById("profile-photo-informacion-usuario").appendChild(S),document.getElementById("img-profile-photo-informacion-usuario").classList.add("hidden")}a.innerHTML="Nombre:</br>"+l.name+" "+l.apellido,t.innerHTML="Email: </br>"+l.email,u.innerHTML="Contraseña: </br>"+l.password,l.admin===1?g.innerHTML="Rol:</br>Administrador":g.innerHTML="Rol:</br>Comercial"});const I=document.getElementById("nombre-informacion-usuario").textContent.replace("Nombre:","").trim();document.getElementById("totalinmueblesasignadosUsuarioIniciado");const d=document.getElementById("totalinmueblesasignadostextUsuarioIniciado");d.innerHTML="";const U=document.getElementById("tablainmueblesasignadosUsuarioIniciado");U.innerHTML="";const H=document.getElementById("tablanoticiasasignadasUsuarioIniciado");H.innerHTML="";const F=document.getElementById("tablaencargosasignadosUsuarioIniciado");F.innerHTML="",L.get("https://estudiolucmar.com/backend/users/fetchinmueblesusuarios.php",{params:{responsable:I}}).then(l=>{if(l.data.success){d.innerHTML=l.data.totalInmuebles;const S=document.getElementById("leyendaDeColoresinmueblesUsuarioIniciado");l.data.totalInmuebles===0?S.classList.add("hidden"):S.classList.remove("hidden"),l.data.data.forEach((w,Z)=>{const v=document.createElement("div");v.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),U.appendChild(v),w.commentupdatetime==="red"?v.classList.add("bg-red-100"):w.commentupdatetime==="yellow"?v.classList.add("bg-yellow-100"):w.commentupdatetime==="green"&&v.classList.add("bg-green-100");const C=document.createElement("p");C.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),C.innerHTML=w.direccion,v.appendChild(C)});const R=document.getElementById("totalnoticiasasignadasUsuarioIniciado"),B=document.getElementById("tablanoticiasasignadasUsuarioIniciado"),j=document.getElementById("leyendaDeColoresnoticiasUsuarioIniciado");R.innerHTML=l.data.inmueblesconnoticia.length+" ("+l.data.percentageNoticiastate.toFixed(0)+"%)",l.data.inmueblesconnoticia.length===0?j.classList.add("hidden"):j.classList.remove("hidden"),l.data.inmueblesconnoticia.forEach((w,Z)=>{const v=document.createElement("div");v.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),B.appendChild(v),w.noticiaupdatetime==="red"?v.classList.add("bg-red-100"):w.noticiaupdatetime==="yellow"?v.classList.add("bg-yellow-100"):w.noticiaupdatetime==="green"&&v.classList.add("bg-green-100");const C=document.createElement("p");C.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),C.innerHTML=w.direccion,v.appendChild(C)});const E=document.getElementById("totalencargosasignadosUsuarioIniciado"),x=document.getElementById("tablaencargosasignadosUsuarioIniciado"),O=document.getElementById("leyendaDeColoresencargos");E.innerHTML=l.data.inmueblesconencargos.length+" ("+l.data.percentageEncargostate.toFixed(0)+"%)",l.data.inmueblesconencargos.length===0?O.classList.add("hidden"):O.classList.remove("hidden"),l.data.inmueblesconencargos.forEach((w,Z)=>{const v=document.createElement("div");v.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),x.appendChild(v),w.encargoupdatetime==="red"?v.classList.add("bg-red-100"):w.encargoupdatetime==="yellow"?v.classList.add("bg-yellow-100"):w.encargoupdatetime==="green"&&v.classList.add("bg-green-100");const C=document.createElement("p");C.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),C.innerHTML=w.direccion,v.appendChild(C)})}else console.log("Error:",l.data),d.innerHTML="0"}).catch(l=>{console.log("Error:",l)}),document.getElementById("nombre-header-settings").innerHTML="¿Qué quieres hacer "+n.data[0].name+"?",h.value=n.data[0].name,f.value=n.data[0].apellido,s.value=n.data[0].email,c.value=n.data[0].password;const D=document.getElementById("rol-edicion");n.data[0].admin===0?(D.classList.add("hidden"),m.classList.add("hidden")):n.data[0].admin===1&&(D.classList.remove("hidden"),m.classList.remove("hidden")),n.data[0].admin===1?r.checked=!0:n.data[0].admin===0&&(y.checked=!0),localStorage.setItem("hidden-id-user",n.data[0].id)}),T=!0,Q(),setTimeout(function(){J()},500)}function X(){_?ee():oe(),_=!_,console.log(_)}const K=document.getElementById("banner-informacion-usuario");K.addEventListener("click",function(){X()});const $=document.getElementById("cerrar-info-UsuarioIniciado");$.addEventListener("click",function(){X()});function ee(){const e=document.getElementById("arrow-down-settings-infousuario"),o=document.getElementById("arrow-up-settings-infousuario"),a=document.getElementById("container-informacion-usuario");o.classList.add("block"),o.classList.remove("hidden"),e.classList.add("hidden"),e.classList.remove("block"),a.classList.add("flex"),a.classList.remove("hidden")}function oe(){const e=document.getElementById("arrow-down-settings-infousuario"),o=document.getElementById("arrow-up-settings-infousuario"),a=document.getElementById("container-informacion-usuario");e.classList.remove("hidden"),e.classList.add("block"),o.classList.remove("block"),o.classList.add("hidden"),a.classList.remove("flex"),a.classList.add("hidden");const t=document.getElementById("container-informacion-usuario-edicion");t.classList.remove("flex"),t.classList.add("hidden")}function ie(){T?ne():te(),T=!T,console.log(T)}const ae=document.getElementById("banner-informacion-usuario-allusers");ae.addEventListener("click",function(){ie()});function ne(){const e=document.getElementById("arrow-down-settings-infousuario-allusers"),o=document.getElementById("arrow-up-settings-infousuario-allusers"),a=document.getElementById("container-informacion-usuario-allusers");o.classList.add("block"),o.classList.remove("hidden"),e.classList.add("hidden"),e.classList.remove("block"),a.classList.add("flex"),a.classList.remove("hidden")}function te(){const e=document.getElementById("arrow-down-settings-infousuario-allusers"),o=document.getElementById("arrow-up-settings-infousuario-allusers"),a=document.getElementById("container-informacion-usuario-allusers");e.classList.remove("hidden"),e.classList.add("block"),o.classList.remove("block"),o.classList.add("hidden"),a.classList.remove("flex"),a.classList.add("hidden");const t=document.getElementById("informacion-usuario-individual");t.classList.remove("flex"),t.classList.add("hidden"),A(),k()}function de(){const e=document.getElementById("container-informacion-usuario");e.classList.remove("flex"),e.classList.add("hidden");const o=document.getElementById("container-informacion-usuario-edicion");o.classList.remove("hidden"),o.classList.add("flex")}const se=document.getElementById("show-informacion-usuario-modo-edicion");se.addEventListener("click",function(){de()});function re(){const e=document.getElementById("container-informacion-usuario");e.classList.remove("hidden"),e.classList.add("flex");const o=document.getElementById("container-informacion-usuario-edicion");o.classList.remove("flex"),o.classList.add("hidden")}const ce=document.getElementById("hide-informacion-usuario-modo-edicion");ce.addEventListener("click",function(){re()});function le(){Ne();const e=document.getElementById("informacionusuarioindividualbloque1");e.classList.remove("flex"),e.classList.add("hidden");const o=document.getElementById("informacionusuarioindividualbloque1-edicion");o.classList.remove("hidden"),o.classList.add("flex"),W()}const ue=document.getElementById("show-informacion-usuario-individual-modo-edicion");ue.addEventListener("click",function(){le()});function A(){const e=document.getElementById("informacionusuarioindividualbloque1");e.classList.remove("hidden"),e.classList.add("flex");const o=document.getElementById("informacionusuarioindividualbloque1-edicion");o.classList.remove("flex"),o.classList.add("hidden")}const me=document.getElementById("hide-informacion-usuario-individual-modo-edicion");me.addEventListener("click",function(){A()});function ge(){const e=document.getElementById("nombre-informacion-usuario-edicion"),o=document.getElementById("apellido-informacion-usuario-edicion"),a=document.getElementById("email-informacion-usuario-edicion"),t=document.getElementById("password-informacion-usuario-edicion"),u=document.querySelector('input[name="radio-admin-informacion-usuario"]:checked');document.getElementById("file-upload-avatar");const g=e.value,r=o.value,y=a.value,h=t.value,f=u.value;localStorage.getItem("hidden-id-user"),console.log(f);const c=document.getElementById("nombre-informacion-usuario").textContent.replace("Nombre:","").trim();console.log("nombreSinPrefijo",c);const m=g+" "+r;console.log("nombreCompletoNuevo",m),L.get("https://estudiolucmar.com/backend/users/updateuserinformation.php",{params:{nombre:g,apellido:r,email:y,password:h,admin:f},withCredentials:!0}).then(p=>{console.log("response.data",p.data),p.data.success?(L.get("https://estudiolucmar.com/backend/users/updateNombreResponsable.php",{params:{nombreCompletoAntiguo:c,nombreCompletoNuevo:m}}).then(n=>{console.log("response.data",n.data),n.data.success?console.log("Responsables actualizados correctamente:",n.data):console.error("Error updating responsables:",n.data.message)}).catch(n=>{console.error("Error fetching responsables:",n)}),q(),L.get("https://estudiolucmar.com/backend/auth/logout.php",{withCredentials:!0}).then(n=>{console.log("response.data",n.data),n.data.success?(console.log("Usuario cerrado correctamente:",n.data),window.location.href="/"):console.error("Error closing user:",n.data.message)}).catch(n=>{console.error("Error fetching user:",n)})):(M({text:"No se ha modificado ningún dato.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),q())}).catch(p=>{console.error("Error fetching user data:",p)})}const fe=document.getElementById("update-user-information");fe.addEventListener("click",function(){ge()});function pe(){const e=document.getElementsByName("sample_image")[0],o=document.getElementById("img-profile-photo-informacion-usuario"),a=document.getElementById("img-profile-photo-informacion-usuario-edicion"),t=100*1024,u=g=>{const r=new FileReader;r.onload=function(y){const h=new Image;h.onload=function(){const f=document.createElement("canvas");let s=h.width,c=h.height;const m=s/c,p=Math.sqrt(t/.75);(s>p||c>p)&&(m>1?(s=p,c=s/m):(c=p,s=c*m)),f.width=s,f.height=c,f.getContext("2d").drawImage(h,0,0,s,c),f.toBlob(i=>{const b=new FormData;b.append("sample_image",i,"image.webp"),L.post("https://estudiolucmar.com/backend/users/updateprofilephoto.php",b,{withCredentials:!0}).then(I=>{o.src="",a.src="",o.src="data:image/jpeg;base64,"+I.data.profile_photo,a.src="data:image/jpeg;base64,"+I.data.profile_photo}).catch(I=>{console.error("Error uploading image:",I)})},"image/webp",.8)},h.src=y.target.result},r.readAsDataURL(g)};if(e.files.length>0){const g=e.files[0];g.type.match(/image.*/)?u(g):console.error("Invalid file type. Please upload an image file.")}else console.error("No file selected.")}const he=document.getElementById("update-profile-photo");he.addEventListener("click",function(){pe()});function be(){const e=document.getElementsByName("sample_image_individual")[0],o=document.getElementById("img-profile-photo-informacion-usuario-individual"),a=document.getElementById("img-profile-photo-informacion-usuario-individual-edicion"),t=localStorage.getItem("hidden-id-user-administar"),u=100*1024,g=r=>{const y=new FileReader;y.onload=function(h){const f=new Image;f.onload=function(){const s=document.createElement("canvas");let c=f.width,m=f.height;const p=c/m,n=Math.sqrt(u/.75);(c>n||m>n)&&(p>1?(c=n,m=c/p):(m=n,c=m*p)),s.width=c,s.height=m,s.getContext("2d").drawImage(f,0,0,c,m),s.toBlob(b=>{const I=new FormData;I.append("sample_image_individual",b,"image.webp"),I.append("id",t),L.post("https://estudiolucmar.com/backend/users/updateprofilephotoIndividual.php",I).then(d=>{o.src="",a.src="",o.src="data:image/jpeg;base64,"+d.data.profile_photo,a.src="data:image/jpeg;base64,"+d.data.profile_photo}).catch(d=>{console.error("Error uploading image:",d)})},"image/webp",.8)},f.src=h.target.result},y.readAsDataURL(r)};if(e.files.length>0){const r=e.files[0];r.type.match(/image.*/)?g(r):console.error("Invalid file type. Please upload an image file.")}else console.error("No file selected.")}const Ie=document.getElementById("update-profile-photo-individual");Ie.addEventListener("click",function(){be()});function Ee(){P();const e=document.getElementById("nombre-informacion-usuario-edicion-individual"),o=document.getElementById("apellido-informacion-usuario-edicion-individual"),a=document.getElementById("email-informacion-usuario-edicion-individual"),t=document.getElementById("password-informacion-usuario-edicion-individual"),u=document.querySelector('input[name="radio-admin-informacion-usuario-individual"]:checked'),g=localStorage.getItem("hidden-id-user-administar"),r=e.value,y=o.value,h=a.value,f=t.value,s=u.value,m=document.getElementById("nombre-informacion-usuario-individual").textContent.replace("Nombre:","").trim();console.log("nombreSinPrefijo",m);const p=r+" "+y;console.log("nombreCompletoNuevo",p),L.get("https://estudiolucmar.com/backend/users/checkDeleteUser.php",{params:{id:g}}).then(n=>{if(n.data.success)L.get("https://estudiolucmar.com/backend/users/updateuserinformationindividual.php",{params:{nombre:r,apellido:y,email:h,password:f,admin:s,id:g}}).then(i=>{i.data.success?(L.get("https://estudiolucmar.com/backend/users/updateNombreResponsable.php",{params:{nombreCompletoAntiguo:m,nombreCompletoNuevo:p}}).then(b=>{b.data.success?console.log("Responsables actualizados correctamente:",b.data):console.error("Error updating responsables:",b.data.message)}).catch(b=>{console.error("Error fetching responsables:",b)}),A(),W(),N(),k(),T=!1,M({text:"Información actualizada",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #005d09, #0b6316, #146921, #1d6f2b, #247535, #267a39, #287e3d, #2a8341, #278740, #248b3f, #20903e, #1c943d)"},onClick:function(){}}).showToast()):(M({text:"Ningún dato modificado",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)",textAlign:"center"},onClick:function(){}}).showToast(),A(),k(),T=!1)}).catch(i=>{console.error("Error fetching user data:",i)});else{let i=function(){Ue(),setTimeout(function(){Ce(),window.location.href="/"},4e3)};k(),L.get("https://estudiolucmar.com/backend/users/updateuserinformationindividual.php",{params:{nombre:r,apellido:y,email:h,password:f,admin:s,id:g}}).then(b=>{b.data.success?(L.get("https://estudiolucmar.com/backend/users/updateNombreResponsable.php",{params:{nombreCompletoAntiguo:m,nombreCompletoNuevo:p}}).then(I=>{I.data.success?console.log("Responsables actualizados correctamente:",I.data):console.error("Error updating responsables:",I.data.message)}).catch(I=>{console.error("Error fetching responsables:",I)}),A(),W(),N(),T=!1):(A(),k(),T=!1)}).catch(b=>{console.error("Error fetching user data:",b)}),i()}}).catch(n=>{console.error("Error fetching user data:",n)})}const ye=document.getElementById("edit-button-noticia-editar-3");ye.addEventListener("click",function(){Ee()});function ve(){P();const e=localStorage.getItem("hidden-id-user-administar"),a=document.getElementById("nombre-informacion-usuario-individual").textContent.replace("Nombre:","").trim();console.log("nombreSinPrefijo",a),L.get("https://estudiolucmar.com/backend/users/checkDeleteUser.php",{params:{id:e}}).then(t=>{t.data.success?(console.log("User response.data deleted successfully:",t.data),L.get("https://estudiolucmar.com/backend/users/deleteUser.php",{params:{id:e,nombreCompletoAntiguo:a}}).then(u=>{u.data.success?(M({text:"Usuario Eliminado",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),Y(),k()):console.error("Error deleting user:",u.data.message)}).catch(u=>{console.error("Error fetching user:",u)})):(M({text:"No puedes borrar tu propia cuenta.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),k())}).catch(t=>{console.error("Error fetching user data:",t)})}const Le=document.getElementById("delete-usuario-inidividual");Le.addEventListener("click",function(){ve()});function Be(){const e=document.getElementById("toast-reload");e.classList.remove("hidden"),e.classList.add("flex")}const we=document.getElementById("edit-button-noticia-editar-1");we.addEventListener("click",function(){Be()});function q(){const e=document.getElementById("toast-reload");e.classList.remove("flex"),e.classList.add("hidden")}const xe=document.getElementById("hide-toast-reload");xe.addEventListener("click",function(){q()});function Ue(){const e=document.getElementById("toast-reload-edicion");e.classList.remove("hidden"),e.classList.add("flex")}function Ce(){const e=document.getElementById("toast-reload-edicion");e.classList.remove("flex"),e.classList.add("hidden")}function Q(){console.log("Hiding loading screen...");const e=document.getElementById("loading-screen-settings");e.classList.remove("flex"),e.classList.add("hidden")}function Te(){const e=document.getElementById("agregar-user-container");e.classList.remove("flex"),e.classList.add("hidden");const o=document.getElementById("agregar-usuario-form");o.classList.remove("hidden"),o.classList.add("flex")}const ke=document.getElementById("agregar-user-container");ke.addEventListener("click",function(){Te()});function z(){const e=document.getElementById("agregar-usuario-form");e.classList.remove("flex"),e.classList.add("hidden");const o=document.getElementById("agregar-user-container");o.classList.remove("hidden"),o.classList.add("flex")}const Me=document.getElementById("cerrar-formulario-agregar-usuario");Me.addEventListener("click",function(){z()});function He(){const e=document.getElementById("nombre-informacion-usuario-agregar"),o=document.getElementById("apellido-informacion-usuario-agregar"),a=document.getElementById("email-informacion-usuario-agregar"),t=document.getElementById("password-informacion-usuario-agregar"),u=document.querySelector('input[name="radio-admin-informacion-usuario-agregar"]:checked'),g=e.value,r=o.value,y=a.value,h=t.value,f=u.value;L.get("https://estudiolucmar.com/backend/users/insertuserinformation.php",{params:{nombre:g,apellido:r,email:y,password:h,admin:f}}).then(s=>{s.data.success?(console.log("User data inserted successfully:",s.data),M({text:"Usuario agregado",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #005d09, #0b6316, #146921, #1d6f2b, #247535, #267a39, #287e3d, #2a8341, #278740, #248b3f, #20903e, #1c943d)"},onClick:function(){}}).showToast(),N(),z()):console.error("Error inserting user data:",s.data.message)}).catch(s=>{console.error("Error fetching user data:",s)})}function Se(){var e=document.getElementById("nombre-informacion-usuario-agregar").value,o=document.getElementById("apellido-informacion-usuario-agregar").value,a=document.getElementById("email-informacion-usuario-agregar").value,t=document.getElementById("password-informacion-usuario-agregar").value;return!e||!o||!a||!t?(M({text:"Todos los campos son obligatorios.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),!1):L.get("https://estudiolucmar.com/backend/users/fetchusersdatabase.php").then(u=>u.data.map(r=>r.email).includes(a)?(M({text:"Un usuario con ese email ya existe.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),!1):(He(),!0)).catch(u=>(console.error("Error fetching user data:",u),!1))}const Ae=document.getElementById("edit-button-noticia-editar-2");Ae.addEventListener("click",function(){Se()});function De(e){z(),P();const o=e;localStorage.setItem("hidden-id-user-administar",o);const a=document.getElementById("informacion-usuario-individual");a.classList.remove("hidden"),a.classList.add("flex");const t=document.getElementById("container-informacion-usuario-allusers");t.classList.remove("flex"),t.classList.add("hidden");const u=document.getElementById("img-profile-photo-informacion-usuario-individual"),g=document.getElementById("profile-photo-container"),r=document.getElementById("nombre-informacion-usuario-individual"),y=document.getElementById("email-informacion-usuario-individual"),h=document.getElementById("password-informacion-usuario-individual"),f=document.getElementById("admin-informacion-usuario-individual"),s=document.getElementById("noimagetext");document.getElementById("totalinmueblesasignados");const c=document.getElementById("totalinmueblesasignadostext");c.innerHTML="";const m=document.getElementById("tablainmueblesasignados");m.innerHTML="";const p=document.getElementById("tablanoticiasasignadas");p.innerHTML="";const n=document.getElementById("tablaencargosasignados");n.innerHTML="",u.src="",r.innerHTML="",y.innerHTML="",h.innerHTML="",f.innerHTML="",L.get("https://estudiolucmar.com/backend/users/fetchusersdatabaseID.php",{params:{id:o}}).then(i=>{if(i.data.success){console.log("User data inserted successfully:",i.data);const b=i.data.data.name+" "+i.data.data.apellido;i.data.data.profile_photo===null?(g.classList.add("hidden"),s.classList.remove("hidden")):(s.classList.add("hidden"),g.classList.remove("hidden"),u.src="data:image/jpeg;base64,"+i.data.data.profile_photo),r.innerHTML="Nombre:</br>"+i.data.data.name+" "+i.data.data.apellido,y.innerHTML="Email:</br>"+i.data.data.email,h.innerHTML="Contraseña:</br>"+i.data.data.password,f.innerHTML="Rol:</br>"+(i.data.data.admin===1?"Administrador":"Comercial");const I=b;L.get("https://estudiolucmar.com/backend/users/fetchinmueblesusuarios.php",{params:{responsable:I}}).then(d=>{if(d.data.success){c.innerHTML=d.data.totalInmuebles;const U=document.getElementById("leyendaDeColoresinmuebles");d.data.totalInmuebles===0?U.classList.add("hidden"):U.classList.remove("hidden"),d.data.data.forEach((B,j)=>{const E=document.createElement("div");E.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),m.appendChild(E),B.commentupdatetime==="red"?E.classList.add("bg-red-100"):B.commentupdatetime==="yellow"?E.classList.add("bg-yellow-100"):B.commentupdatetime==="green"&&E.classList.add("bg-green-100");const x=document.createElement("p");x.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),x.innerHTML=B.direccion,E.appendChild(x)});const H=document.getElementById("totalnoticiasasignadas"),F=document.getElementById("tablanoticiasasignadas"),D=document.getElementById("leyendaDeColoresnoticias");H.innerHTML=d.data.inmueblesconnoticia.length+" ("+d.data.percentageNoticiastate.toFixed(0)+"%)",d.data.inmueblesconnoticia.length===0?D.classList.add("hidden"):D.classList.remove("hidden"),d.data.inmueblesconnoticia.forEach((B,j)=>{const E=document.createElement("div");E.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),F.appendChild(E),B.noticiaupdatetime==="red"?E.classList.add("bg-red-100"):B.noticiaupdatetime==="yellow"?E.classList.add("bg-yellow-100"):B.noticiaupdatetime==="green"&&E.classList.add("bg-green-100");const x=document.createElement("p");x.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),x.innerHTML=B.direccion,E.appendChild(x)});const l=document.getElementById("totalencargosasignados"),S=document.getElementById("tablaencargosasignados"),R=document.getElementById("leyendaDeColoresencargosindividual");l.innerHTML=d.data.inmueblesconencargos.length+" ("+d.data.percentageEncargostate.toFixed(0)+"%)",d.data.inmueblesconencargos.length===0?R.classList.add("hidden"):R.classList.remove("hidden"),d.data.inmueblesconencargos.forEach((B,j)=>{const E=document.createElement("div");E.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),S.appendChild(E),B.encargoupdatetime==="red"?E.classList.add("bg-red-100"):B.encargoupdatetime==="yellow"?E.classList.add("bg-yellow-100"):B.encargoupdatetime==="green"&&E.classList.add("bg-green-100");const x=document.createElement("p");x.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),x.innerHTML=B.direccion,E.appendChild(x)})}else console.log("Error:",d.data),c.innerHTML="0";k()}).catch(d=>{console.log("Error:",d)})}else console.error("Error inserting user data:",i.data.message)}).catch(i=>{console.error("Error fetching user data:",i)})}function W(){const e=localStorage.getItem("hidden-id-user-administar"),o=document.getElementById("noimagetext"),a=document.getElementById("profile-photo-container"),t=document.getElementById("nombre-informacion-usuario-individual"),u=document.getElementById("email-informacion-usuario-individual"),g=document.getElementById("password-informacion-usuario-individual"),r=document.getElementById("admin-informacion-usuario-individual"),y=document.getElementById("img-profile-photo-informacion-usuario-individual");t.innerHTML="",u.innerHTML="",g.innerHTML="",r.innerHTML="",y.src="",o.innerHTML="";const h=document.getElementById("img-profile-photo-informacion-usuario-individual-edicion"),f=document.getElementById("nombre-informacion-usuario-edicion-individual"),s=document.getElementById("apellido-informacion-usuario-edicion-individual"),c=document.getElementById("email-informacion-usuario-edicion-individual"),m=document.getElementById("password-informacion-usuario-edicion-individual"),p=document.getElementById("admin-informacion-usuario-edicion-admin-individual"),n=document.getElementById("admin-informacion-usuario-edicion-comercial-individual");h.src="",L.get("https://estudiolucmar.com/backend/users/fetchusersdatabaseID.php",{params:{id:e}}).then(i=>{i.data.success?(i.data.data.profile_photo===null?(a.classList.add("hidden"),o.classList.remove("hidden")):(o.classList.add("hidden"),a.classList.remove("hidden"),y.src="data:image/jpeg;base64,"+i.data.data.profile_photo,h.src="data:image/jpeg;base64,"+i.data.data.profile_photo),t.innerHTML="Nombre:</br>"+i.data.data.name+" "+i.data.data.apellido,u.innerHTML="Email:</br>"+i.data.data.email,g.innerHTML="Contraseña:</br>"+i.data.data.password,r.innerHTML="Rol:</br>"+(i.data.data.admin===1?"Administrador":"Comercial"),r.innerHTML="Rol:</br>"+(i.data.data.admin===0?"Comercial":"Administrador"),f.value=i.data.data.name,s.value=i.data.data.apellido,c.value=i.data.data.email,m.value=i.data.data.password,console.log("data admin gato lucas: "+i.data.data.admin),i.data.data.admin===1?p.checked=!0:i.data.data.admin===0&&(n.checked=!0)):console.error("Error inserting user data:",i.data.message),je()}).catch(i=>{console.error("Error fetching user data:",i)})}function Y(){const e=document.getElementById("informacion-usuario-individual");e.classList.remove("flex"),e.classList.add("hidden"),document.getElementById("noimagetext").classList.add("hidden");const a=document.getElementById("container-informacion-usuario-allusers");a.classList.remove("hidden"),a.classList.add("flex"),N(),A(),P(),T=!1}const Re=document.getElementById("cerrar-info-individual");Re.addEventListener("click",function(){Y()});function k(){const e=document.getElementById("loading-screen-settings-informacion-usuario-individual");e.classList.remove("flex"),e.classList.add("hidden")}function P(){const e=document.getElementById("loading-screen-settings-informacion-usuario-individual");e.classList.add("flex"),e.classList.remove("hidden")}function je(){const e=document.getElementById("loading-screen-settings-informacion-usuario-individual-modo-edicion");e.classList.remove("flex"),e.classList.add("hidden")}function Ne(){const e=document.getElementById("loading-screen-settings-informacion-usuario-individual-modo-edicion");e.classList.remove("hidden"),e.classList.add("flex")}
